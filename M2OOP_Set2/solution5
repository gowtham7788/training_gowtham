using namespace std;
#include<iostream>
#include<cstring>
class userdata
{
public:
	char username[10]="";
	char email[20]="";
};

int validEmailAddress(char* email)
{
	int j;
	int atPosition=-1;
	int dotPosition=-1;
	int length=strlen(email);
	for(j=0;j<length;j++)
	{
		if(email[j]=='@')
			atPosition=j;
		else if (email[j]=='.')
			dotPosition=j;
	}
	if(atPosition==-1||dotPosition==-1)
		return 0;
	if(atPosition>dotPosition)
		return 0;

return 1;
}
int main()
{	
	userdata obj[10];
	char username[10];
	char email[20];
	int i,j,flag,check;
	int age;
	int no_of_users;
	cout<<"Enter number of users(<10) ";
	cin>>no_of_users;
	for(i=0;i<no_of_users;i++)
	{
		flag=1;
		while(flag)
		{
		try
		{	
		cout<<"\nEnter username ";
		cin>>username;
			for(j=0;j<i;j++)
			{
				if(strcmp(obj[j].username,username)==0)
				{
					throw "username not unique";
				}
			}
			flag=0;
			
		}
		catch(const char* msg)
		{
			cout<<msg;
		}
		}
		
		try
		{
			cout<<"Enter email address ";
			cin>>email;
			check=validEmailAddress(email);
			if(check==0)
				throw "invalid emailaddress";
		}
		catch(const char* msg)
		{
			cout<<msg;
		}		
		try
		{
		cout<<"\nEnter age ";
		cin>>age;
			if(age<1)
			{
				throw "Age is not positive integer";
			}
			if(age<15)
			{
				throw "Age is less than 16";
			}
			if(age>15)
			{
				strcpy(obj[i].username,username);
				strcpy(obj[i].email,email);	
			}
		}
		catch(const char* msg)
		{
			cout<<msg<<endl;
		}
	}
	cout<<"\nUsername\tEmail"<<endl;
	for(i=0;i<no_of_users;i++)
	{
		cout<<obj[i].username<<"\t\t"<<obj[i].email<<endl;
	}
}
